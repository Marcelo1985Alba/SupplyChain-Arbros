@using Syncfusion.Blazor.Data
@using Syncfusion.Blazor.Charts
@using Syncfusion.Blazor
@using Syncfusion.Blazor.Navigations
@page "/pcp/indicadores/unidades-equivalentes"
@inherits BaseEstadUnidEquiv

<SfTab HeaderPlacement="HeaderPosition.Top">
    <TabItems>
        <TabItem>
            <ChildContent>
                <TabHeader Text="Pedidos Ingresados"></TabHeader>
            </ChildContent>
            <ContentTemplate>
                <div class="row">
                    <div class="col-6">
                        <SfSpinner @ref="refSpinner" Label="Cargando..." Type="SpinnerType.Fabric" @bind-Visible="@VisibleSpinner"></SfSpinner>
                        <div class="card">
                            <div class="card-body">
                                <SfChart Title="" Width="100%">
                                    <ChartArea><ChartAreaBorder Width="0"></ChartAreaBorder></ChartArea>
                                    <ChartPrimaryXAxis ValueType="Syncfusion.Blazor.Charts.ValueType.Category">
                                    </ChartPrimaryXAxis>

                                    <ChartPrimaryYAxis Title="Unidades Equivalentes Anuales" LabelFormat="{value}">
                                        <ChartAxisLineStyle Width="0"></ChartAxisLineStyle>
                                        <ChartAxisLabelStyle Color="black"></ChartAxisLabelStyle>
                                        <ChartAxisMajorGridLines Width="0"></ChartAxisMajorGridLines>
                                        <ChartAxisMajorTickLines Width="0"></ChartAxisMajorTickLines>

                                    </ChartPrimaryYAxis>
                                    <ChartSeriesCollection>
                                        <ChartSeries DataSource="@PedidosIngresadosAnuales" XName="XSerieName" YName="YSerieName" Name="Año"
                                                     Type="Syncfusion.Blazor.Charts.ChartSeriesType.Column" >
                                            <ChartMarker>
                                                <ChartDataLabel Visible="false" Position="Syncfusion.Blazor.Charts.LabelPosition.Top">
                                                    <ChartDataLabelFont FontWeight="600" Color="#ffffff"></ChartDataLabelFont>
                                                </ChartDataLabel>
                                            </ChartMarker>
                                        </ChartSeries>
                                    </ChartSeriesCollection>
                                    <ChartTooltipSettings Enable="true"></ChartTooltipSettings>
                                    <ChartEvents OnPointClick="@(async (a)=> await MostrarDetalle(a))"></ChartEvents>
                                </SfChart>
                            </div>


                        </div>

                    </div>

                    <div class="col-6">
                        <div class="card">
                            <div class="card-body">
                                <SfChart @ref="refChartDetalle" Width="100%">
                                    <ChartArea><ChartAreaBorder Width="0"></ChartAreaBorder></ChartArea>
                                    <ChartPrimaryXAxis ValueType="Syncfusion.Blazor.Charts.ValueType.Category"
                                                       EdgeLabelPlacement="EdgeLabelPlacement.Shift">
                                    </ChartPrimaryXAxis>

                                    <ChartPrimaryYAxis Title="@TituloGraficoMensual" LabelFormat="{value}" Minimum="0" Maximum="500">
                                        <ChartAxisLineStyle Width="0"></ChartAxisLineStyle>
                                        <ChartAxisLabelStyle Color="black"></ChartAxisLabelStyle>
                                        <ChartAxisMajorGridLines Width="0"></ChartAxisMajorGridLines>
                                        <ChartAxisMajorTickLines Width="0"></ChartAxisMajorTickLines>
                                        <ChartStriplines>

                                            @if (PromedioPedidosIngresadosMensuales > 0)
                                            {
                                                <ChartStripline Start="398" End="400" Color="red"
                                                                Text="@("Objetivo: 400")" ZIndex="ZIndex.Over">
                                                    <ChartStriplineTextStyle Color="red" />
                                                </ChartStripline>
                                                <ChartStripline Start="@(PromedioPedidosIngresadosMensuales - 2)"
                                                                Text="@("Promedio: " + PromedioPedidosIngresadosMensuales )" ZIndex="ZIndex.Over"
                                                                End="PromedioPedidosIngresadosMensuales" Color="blue" />
                                            }

                                        </ChartStriplines>
                                    </ChartPrimaryYAxis>
                                    <ChartSeriesCollection>
                                        <ChartSeries DataSource="@PedidosIngresadosMensuales" XName="XSerieName" YName="YSerieName" Name="Mes"
                                                     Type="Syncfusion.Blazor.Charts.ChartSeriesType.Column">
                                            <ChartMarker>
                                                <ChartDataLabel Visible="false" Position="Syncfusion.Blazor.Charts.LabelPosition.Top">
                                                    <ChartDataLabelFont FontWeight="600" Color="#ffffff"></ChartDataLabelFont>
                                                </ChartDataLabel>
                                            </ChartMarker>
                                        </ChartSeries>
                                    </ChartSeriesCollection>
                                    <ChartTooltipSettings Enable="true">
                                    </ChartTooltipSettings>
                                    <ChartLegendSettings Visible="true" />
                                </SfChart>
                            </div>


                        </div>

                    </div>

                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <SfGrid DataSource="@(PedidosIngresadosAnualesDetalle)" GridLines="GridLine.Both"
                                        AllowResizing="true" AllowReordering="true" AllowMultiSorting="true" AllowSorting="true"
                                        AllowPaging="true" Height="450"> </SfGrid>
                            </div>
                        </div>

                    </div>
                </div>
            </ContentTemplate>
        </TabItem>
        <TabItem>
            <ChildContent>
                <TabHeader Text="Pedidos dados de Alta"></TabHeader>
            </ChildContent>
            <ContentTemplate>
                <div class="row">
                    <div class="col-6">
                        <div class="card">
                            <div class="card-body">
                                <SfChart Title="Unidades Equivalentes de Pedidos Alta Anuales" Width="100%">
                                    <ChartArea><ChartAreaBorder Width="0"></ChartAreaBorder></ChartArea>
                                    <ChartPrimaryXAxis ValueType="Syncfusion.Blazor.Charts.ValueType.Category"
                                                       EdgeLabelPlacement="EdgeLabelPlacement.Shift">
                                    </ChartPrimaryXAxis>

                                    <ChartPrimaryYAxis LabelFormat="{value}">
                                        <ChartAxisLineStyle Width="0"></ChartAxisLineStyle>
                                        <ChartAxisLabelStyle Color="transparent"></ChartAxisLabelStyle>
                                        <ChartAxisMajorGridLines Width="0"></ChartAxisMajorGridLines>
                                        <ChartAxisMajorTickLines Width="0"></ChartAxisMajorTickLines>
                                    </ChartPrimaryYAxis>
                                    <ChartSeriesCollection>
                                        <ChartSeries DataSource="@PedidosAltasAnuales" XName="XSerieName" YName="YSerieName" Name="Año"
                                                     Type="Syncfusion.Blazor.Charts.ChartSeriesType.Column">
                                            <ChartMarker>
                                                <ChartDataLabel Visible="false" Position="Syncfusion.Blazor.Charts.LabelPosition.Top">
                                                    <ChartDataLabelFont FontWeight="600" Color="#ffffff"></ChartDataLabelFont>
                                                </ChartDataLabel>
                                            </ChartMarker>
                                        </ChartSeries>
                                    </ChartSeriesCollection>
                                    <ChartTooltipSettings Enable="true"></ChartTooltipSettings>
                                    <ChartEvents OnPointClick="@(async (a)=> await MostrarDetallePedidosAlta(a))"></ChartEvents>
                                </SfChart>
                            </div>


                        </div>

                    </div>

                    <div class="col-6">
                        <div class="card">
                            <div class="card-body">
                                <SfChart @ref="refChartDetallePedidosAlta" Title="@TituloGraficoMensualPedidosAlta" Width="100%">
                                    <ChartArea><ChartAreaBorder Width="0"></ChartAreaBorder></ChartArea>
                                    <ChartPrimaryXAxis ValueType="Syncfusion.Blazor.Charts.ValueType.Category"
                                                       EdgeLabelPlacement="EdgeLabelPlacement.Shift">
                                    </ChartPrimaryXAxis>

                                    <ChartPrimaryYAxis LabelFormat="{value}">
                                        <ChartAxisLineStyle Width="0"></ChartAxisLineStyle>
                                        <ChartAxisLabelStyle Color="transparent"></ChartAxisLabelStyle>
                                        <ChartAxisMajorGridLines Width="0"></ChartAxisMajorGridLines>
                                        <ChartAxisMajorTickLines Width="0"></ChartAxisMajorTickLines>
                                        <ChartStriplines>

                                            @if (PromedioPedidosAltaMensuales > 0)
                                            {
                                                <ChartStripline Start="397" End="400" Color="red"
                                                                Text="@("Objetivo: 400")" ZIndex="ZIndex.Over">
                                                    <ChartStriplineTextStyle Size="20px" Color="red" />
                                                </ChartStripline>
                                                <ChartStripline Start="@(PromedioPedidosAltaMensuales - 5)"
                                                                Text="@("Promedio: " + PromedioPedidosAltaMensuales )" ZIndex="ZIndex.Over"
                                                                End="PromedioPedidosAltaMensuales" Color="blue" />
                                            }

                                        </ChartStriplines>
                                    </ChartPrimaryYAxis>
                                    <ChartSeriesCollection>
                                        <ChartSeries DataSource="@PedidosAltasMensuales" XName="XSerieName" YName="YSerieName" Name="Mes"
                                                     Type="Syncfusion.Blazor.Charts.ChartSeriesType.Column">
                                            <ChartMarker>
                                                <ChartDataLabel Visible="false" Position="Syncfusion.Blazor.Charts.LabelPosition.Top">
                                                    <ChartDataLabelFont FontWeight="600" Color="#ffffff"></ChartDataLabelFont>
                                                </ChartDataLabel>
                                            </ChartMarker>
                                        </ChartSeries>
                                    </ChartSeriesCollection>
                                    <ChartTooltipSettings Enable="true">
                                    </ChartTooltipSettings>
                                </SfChart>
                            </div>


                        </div>

                    </div>

                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <SfGrid DataSource="@PedidosAltaAnualesDetalle" GridLines="GridLine.Both" AllowResizing="true"
                                        AllowReordering="true" AllowSorting="true"
                                        AllowPaging="true" Height="450"> </SfGrid>
                            </div>
                        </div>

                    </div>
                </div>
            </ContentTemplate>
        </TabItem>
    </TabItems>
</SfTab>
